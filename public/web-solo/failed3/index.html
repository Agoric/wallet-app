<!DOCTYPE html>
<html>
  <head>
    <title>Crash Chromium</title>
  </head>
  <body>
    <ol>
      <li>
        <button id="register">Register</button>
        <code>navigator.registerProtocolHandler</code>
      </li>
      <li>Accept the registration</li>
      <li>
        Set an <code>iframe.src</code> to use the new handler
        <button id="danger">Crash!</button>
      </li>
    </ol>

    <iframe id="crashIframe"></iframe>
    <script>
      document
        .querySelector('button#register')
        .addEventListener('click', () => {
          navigator.registerProtocolHandler(
            'web+crashme',
            `${location.href}#%s`,
            'Crash chromium',
          );
        });
      document.querySelector('button#danger').addEventListener('click', () => {
        document.querySelector(
          'iframe#crashIframe',
        ).src = `web+crashme:something`;
      });
    </script>
  </body>
</html>
